<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formation JS - ES</title>
    <link rel="stylesheet" href="../css/bootstrap.css" />
    <script src="../js/bootstrap.bundle.js"></script>
    <script src="../js/scripts.js"></script>
    <script>
        /*
        il existe  deux types de fonctions : les fonctions et les méthodes : 
            - les méthodes sont des fonctions déclarées et utilisées via : 
                - des instances de classe (objets créés par cette classe)
                - la classe directement quand cette méthode est statique dans la classe
            - les fonctions sont déclarées dans le programme ou dans un script.
                Elle sont utilisables directement sans passer par des objets

        de base, on utilise le mot clef function, puis le nom de la fonction, des parenthèses pour les paramètres (qu'il y en ait ou non)
        enfin des acolades dans lequelles on a le code de la fonction

        Les fonctions peuvent retourner un résultat ou directement agir sans retour vers l'appel de la fonction.
        
        fonction "simple" (sans paramètres d'appel) 
        */

        function helloToi() {
            return 'Coucou';
        }

        let variable = helloToi();
        console.log(variable);
        console.log(helloToi());

        /*
        On peut annoter les fonctions
        */

        /**
         * @param {string} prenom - afficher le prenom
         * @param {string} nom
         * @param {number} age
        */
        function helloYou(prenom = 'Jon', nom = 'Sno', age = 15) {
            return `Hello ${prenom} ${nom}, looking good far a ${age} years old !`;
        }

        console.log(helloYou());
        console.log(helloYou('Jack'));

        /* opérateur variadique OU SPREAD OPERATOR */

        function addition(...tableau) {
            let resultat = 0;
            for (value of tableau) {
                //resultat = resultat + parseFloat(value);
                resultat = resultat + ((parseFloat(value)) ? parseFloat(value) : 0);
            }
            return resultat;
        }

        console.log(addition(1, 2, 3, 'toto', 4, 5, 6, 7, '8', 9));

        /*
        la structure de test try - catch permet de tester l'éxécution d'une fonction ou de code,
        si cela fonctionne on sort du try après avoir éxécuté son code, si dans le try une erreur est relevée, 
        elle est envoyée dans le catch, il faut donc la récupérer dans une variable qui est ensuite 
        affichable
        */

        function testMajorite(age) {
            if (age >= 18) {
                let res = 'Personne majeure';
            } else {
                let res = 'Personne mineure';
            }
            return res;
        }

        try {
            console.log(testMajorite(42));
        } catch (error) {
            console.log(error);
            console.log(`Il y a une erreur : ${error}`);
            console.error(`Il y a une erreur : ${error.name}`);
            console.error(`Il y a une erreur : ${error.message}`);
        }

        console.log('toto');

        /*
        callback function, ou fonction de rappel ou encore fonction anonyme
        */

        let maFonctionAnonyme = function (name = null) {
            return (null === name) ? 'Hello Kitty' : `Hello ${name}`;
        }

        console.log(maFonctionAnonyme());
        console.log(maFonctionAnonyme('Toto'));

        let test = function (valeur, index, tab) {
            if (valeur % 2 === 0) {
                tab[index] = valeur * 1.2;
            } else {
                tab[index] = valeur * 1.3;
            }
        }

        let number = [1, 2, 3, 4, 5, 6];
        let number2 = [1, 2, 3, 4, 5, 6];
        let majoration = [150, 25, 46];
        let majoration2 = [150, 25, 46];

        console.log(number);
        console.log(majoration);

        number.forEach(test);
        majoration.forEach(function (valeur, index, tab) {
            if (valeur % 2 === 0) {
                tab[index] = valeur * 1.2;
            } else {
                tab[index] = valeur * 1.3;
            }
        });

        console.log(number);
        console.log(majoration);

        function majorationPaireImpaire(tableau) {
            tableau.forEach(function (valeur, index, tab) {
                if (valeur % 2 === 0) {
                    tab[index] = valeur * 1.2;
                } else {
                    tab[index] = valeur * 1.3;
                }
            });
            return tableau
        }

        console.log(majorationPaireImpaire(majoration2));

        /* 
        les fonction de callback anonymes peuvent être auto-éxécutée 
        ( fonctionAnonyme(paramètres) )( contenu des paramètres );
        */

        (function (tableau) {
            tableau.forEach(function (valeur, index, tab) {
                if (valeur % 2 === 0) {
                    tab[index] = valeur * 1.2;
                } else {
                    tab[index] = valeur * 1.3;
                }
            });
            console.log(tableau);
        })(number2);

    </script>
</head>

<body>
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container">
            <a class="navbar-brand" href="#">Navbar</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="./">Accueil</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                            aria-expanded="false">
                            Introduction
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="../introduction/index.html">Premiers scripts</a></li>
                            <li><a class="dropdown-item" href="../introduction/tableaux.html">Les tableaux</a></li>
                            <li><a class="dropdown-item" href="../introduction/fonctions.html">Les fonctions</a></li>
                            <li><a class="dropdown-item" href="../introduction/destructuration.html">La
                                    destructuration</a></li>
                            <li><a class="dropdown-item" href="../introduction/storage.html">Le storage</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                            aria-expanded="false">
                            LE DOM
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="../dom/index.html">DOM</a></li>
                            <li><a class="dropdown-item" href="../dom/dom.html">Créer dans le DOM</a></li>
                            <li><a class="dropdown-item" href="../dom/css.html">DOM & CSS</a></li>
                            <li><a class="dropdown-item" href="../dom/dataset.html">Dataset</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                            aria-expanded="false">
                            AJAX
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="../ajax/index.html">Les promesses</a></li>
                            <li><a class="dropdown-item" href="../ajax/fetch.html">AJAX avec Fetch()</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <main class="container">
        <section class="row">
            <div class="col">
                <article class="card">
                    <header class="card-header">
                        <h2>Les fonctions</h2>
                    </header>
                    <main class="card-body">
                        <p>
                            Tout est dans la console
                        </p>
                    </main>
                </article>
            </div>
        </section>
    </main>
</body>

</html>